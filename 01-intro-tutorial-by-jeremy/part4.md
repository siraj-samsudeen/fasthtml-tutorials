

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

``` python
from fasthtml.jupyter import JupyUvi, HTMX
from fasthtml_tutorials.core import start_server, stop_server, show_with_pico
```

### Basic Todo Application

``` python
# This is to render the pico component with styling in the output cells
# if your using VS code with dark theme then change it to light colored theme to properly see the outputs
show(picocondlink)
```

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@latest/css/pico.conditional.min.css">
<style>:root { --pico-font-size: 100%; }</style>

``` python
# To properly render the pico component, we need to add the "pico" class to every tag that is displayed in the output, and this is what this function does
set_pico_cls()
```

    <IPython.core.display.Javascript object>

``` python
app, rt = fast_app(live=True)
start_server(app)
```

<script>
document.body.addEventListener('htmx:configRequest', (event) => {
    if(event.detail.path.includes('://')) return;
    htmx.config.selfRequestsOnly=false;
    event.detail.path = `${location.protocol}//${location.hostname}:8000${event.detail.path}`;
});
</script>

``` python
# In the tutorial jeremy changes the database file to `data/todos.db` in the end, but for best practices we are including it from the start.
app, rt, todos, Todo = fast_app(
    "data/todos.db", live=True, id=int, title=str, done=bool, pk="id"
)
start_server(app)
```

<script>
document.body.addEventListener('htmx:configRequest', (event) => {
    if(event.detail.path.includes('://')) return;
    htmx.config.selfRequestsOnly=false;
    event.detail.path = `${location.protocol}//${location.hostname}:8000${event.detail.path}`;
});
</script>

``` python
@rt("/")
def get():
    items = todos()
    return Titled(
        "Todos",
        Div(*items),
    )
```

``` python
@rt("/")
def get():
    todos.insert(Todo(title="First todo", done=False))
    items = todos()
    return Titled(
        "Todos",
        Div(*items),
    )
```

``` python
# To add a new todo, we need to refresh the page
HTMX(link=True)
```

<a href="http://localhost:8000" target="_blank">Open in new tab</a>

<iframe src="http://localhost:8000" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.source !== frame.contentWindow) return; // Only proceed if the message is from this iframe
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

``` python
items = todos()
show(
    Titled(
        "Todos",
        Div(*items),
    )
)
```

<title>Todos</title>
<main class="container">  <h1>Todos</h1>
  <div></div>
</main>

``` python
items = [Li(o) for o in todos()]
show(Ul(*items))
```

<ul></ul>

``` python
@rt("/")
def get():
    todos.insert(Todo(title="Second todo", done=False))
    items = [Li(o) for o in todos()]
    return Titled(
        "Todos",
        Ul(*items),
    )
```

``` python
HTMX(link=True)
```

<a href="http://localhost:8000" target="_blank">Open in new tab</a>

<iframe src="http://localhost:8000" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.source !== frame.contentWindow) return; // Only proceed if the message is from this iframe
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

``` python
def render(todo):
    return Li(todo.title)


app, rt, todos, Todo = fast_app(
    "data/todos.db",
    live=True,
    render=render,
    id=int,
    title=str,
    done=bool,
    pk="id",
)
start_server(app)
```

<script>
document.body.addEventListener('htmx:configRequest', (event) => {
    if(event.detail.path.includes('://')) return;
    htmx.config.selfRequestsOnly=false;
    event.detail.path = `${location.protocol}//${location.hostname}:8000${event.detail.path}`;
});
</script>

``` python
show(Ul(*todos()))
```

<ul></ul>

``` python
@rt("/")
def get():
    return Titled(
        "Todos",
        Ul(*todos()),
    )
```

``` python
def render(todo):
    return Li(todo.title + ("✅ " if todo.done else ""))


app, rt, todos, Todo = fast_app(
    "data/todos.db",
    live=True,
    render=render,
    id=int,
    title=str,
    done=bool,
    pk="id",
)
start_server(app)
```

<script>
document.body.addEventListener('htmx:configRequest', (event) => {
    if(event.detail.path.includes('://')) return;
    htmx.config.selfRequestsOnly=false;
    event.detail.path = `${location.protocol}//${location.hostname}:8000${event.detail.path}`;
});
</script>

Updating the todos

``` python
def render(todo):
    tid = f"todo-{todo.id}"
    toggle = A("Toggle", hx_get=f"/toggle/{todo.id}", target_id=tid)
    return Li(
        toggle,
        todo.title + ("✅ " if todo.done else ""),
        id=tid,
    )


app, rt, todos, Todo = fast_app(
    "data/todos.db",
    live=True,
    render=render,
    id=int,
    title=str,
    done=bool,
    pk="id",
)
start_server(app)
```

<script>
document.body.addEventListener('htmx:configRequest', (event) => {
    if(event.detail.path.includes('://')) return;
    htmx.config.selfRequestsOnly=false;
    event.detail.path = `${location.protocol}//${location.hostname}:8000${event.detail.path}`;
});
</script>

``` python
Ul(*todos())
```

``` html
<ul></ul>
```

``` python
show(Ul(*todos()))
```

<ul></ul>

``` python
@rt("/")
def get():
    return Titled(
        "Todos",
        Ul(*todos()),
    )
```

``` python
@rt("/toggle/{tid}")
def get(tid: int):
    todo = todos[tid]
    todo.done = not todo.done
    return todos.update(todo)
```

Delete a todo

------------------------------------------------------------------------

<a
href="https://github.com/siraj-samsudeen/fasthtml-tutorials/blob/main/fasthtml_tutorials/01-intro-tutorial-by-jeremy/part4.py#L10"
target="_blank" style="float:right; font-size:smaller">source</a>

### render

>  render (todo)

``` python
start_server(app)
```

<script>
document.body.addEventListener('htmx:configRequest', (event) => {
    if(event.detail.path.includes('://')) return;
    htmx.config.selfRequestsOnly=false;
    event.detail.path = `${location.protocol}//${location.hostname}:8000${event.detail.path}`;
});
</script>

``` python
Ul(*todos())
```

``` html
<ul></ul>
```

``` python
show(Ul(*todos()))
```

<ul></ul>

``` python
@rt("/")
def get():
    return Titled(
        "Todos",
        Ul(*todos()),
    )


@rt("/toggle/{tid}")
def get(tid: int):
    todo = todos[tid]
    todo.done = not todo.done
    return todos.update(todo)
```

``` python
@rt("/{tid}")
def delete(tid: int):
    todos.delete(tid)
```

Create Todo

``` python
# TODO: The output is not displayed as expected, why?
# seems like set_pico_cls() function is not working.

show(Group(Input(placeholder="Add a new todo", name="title"), Button("Add")))
```

<fieldset role="group">  <input placeholder="Add a new todo" name="title">
<button>Add</button></fieldset>

``` python
# Thus we are using custom funtion to apply the styling
# this function is nothing but a wrapper around the elements with the class 'pico'.
show_with_pico(Group(Input(placeholder="Add a new todo", name="title"), Button("Add")))
```

<div class="pico">
<fieldset role="group">    <input placeholder="Add a new todo" name="title">
<button>Add</button></fieldset></div>

``` python
frm = Form(
    Group(Input(placeholder="Add a new todo", name="title"), Button("Add")),
    hx_post="/",
    target_id="todo-list",
    hx_swap="beforeend",
)

show_with_pico(
    Card(
        Ul(*todos()),
        header=frm,
    )
)
```

<div class="pico">
  <article>
    <header>
<form enctype="multipart/form-data" hx-post="/" hx-swap="beforeend" hx-target="#todo-list"><fieldset role="group">          <input placeholder="Add a new todo" name="title">
<button>Add</button></fieldset></form>    </header>
    <ul></ul>
  </article>
</div>

``` python
@rt("/")
def get():
    frm = Form(
        Group(Input(placeholder="Add a new todo", name="title"), Button("Add")),
        hx_post="/",
        target_id="todo-list",
        hx_swap="beforeend",
    )
    return Titled(
        "Todos",
        Card(
            Ul(*todos(), id="todo-list"),
            header=frm,
        ),
    )
```

``` python
@rt("/")
def post(todo: Todo):
    return todos.insert(todo)
```

Changing two object at the same time

------------------------------------------------------------------------

<a
href="https://github.com/siraj-samsudeen/fasthtml-tutorials/blob/main/fasthtml_tutorials/01-intro-tutorial-by-jeremy/part4.py#L33"
target="_blank" style="float:right; font-size:smaller">source</a>

### mk_input

>  mk_input ()

------------------------------------------------------------------------

<a
href="https://github.com/siraj-samsudeen/fasthtml-tutorials/blob/main/fasthtml_tutorials/01-intro-tutorial-by-jeremy/part4.py#L65"
target="_blank" style="float:right; font-size:smaller">source</a>

### get

>  get ()

------------------------------------------------------------------------

<a
href="https://github.com/siraj-samsudeen/fasthtml-tutorials/blob/main/fasthtml_tutorials/01-intro-tutorial-by-jeremy/part4.py#L55"
target="_blank" style="float:right; font-size:smaller">source</a>

### post

>  post (todo:types.Items)

------------------------------------------------------------------------

<a
href="https://github.com/siraj-samsudeen/fasthtml-tutorials/blob/main/fasthtml_tutorials/01-intro-tutorial-by-jeremy/part4.py#L65"
target="_blank" style="float:right; font-size:smaller">source</a>

### get

>  get (tid:int)

------------------------------------------------------------------------

<a
href="https://github.com/siraj-samsudeen/fasthtml-tutorials/blob/main/fasthtml_tutorials/01-intro-tutorial-by-jeremy/part4.py#L60"
target="_blank" style="float:right; font-size:smaller">source</a>

### delete

>  delete (tid:int)

``` python
HTMX(link=True)
```

<a href="http://localhost:8000" target="_blank">Open in new tab</a>

<iframe src="http://localhost:8000" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.source !== frame.contentWindow) return; // Only proceed if the message is from this iframe
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

``` python
stop_server()
```

``` python
import nbdev

nbdev.nbdev_export()
```
